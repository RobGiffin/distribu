{"version":3,"sources":["src/resources/index.js","src/resources/elements/router-progress-indicator/router-progress-indicator.js","/Users/robertwaggott/Code/distribyou/src/resources/elements/router-progress-indicator/router-progress-indicator.html","src/resources/elements/request-indicator/request-indicator.js","/Users/robertwaggott/Code/distribyou/src/resources/elements/request-indicator/request-indicator.html","src/resources/elements/breadcrumbs/breadcrumbs.js","/Users/robertwaggott/Code/distribyou/src/resources/elements/breadcrumbs/breadcrumbs.html","src/reports/reports.js","/Users/robertwaggott/Code/distribyou/src/reports/reports.html","src/main.js","src/home/home.js","/Users/robertwaggott/Code/distribyou/src/home/home.html","src/header/header.js","/Users/robertwaggott/Code/distribyou/src/header/header.html","src/footer/footer.js","/Users/robertwaggott/Code/distribyou/src/footer/footer.html","src/environment.js","src/current-state.js","src/campaigns/share-modal.js","/Users/robertwaggott/Code/distribyou/src/campaigns/share-modal.html","src/campaigns/pledge-modal.js","/Users/robertwaggott/Code/distribyou/src/campaigns/pledge-modal.html","src/campaigns/confirmation.js","/Users/robertwaggott/Code/distribyou/src/campaigns/confirmation.html","src/campaigns/confirm-modal.js","/Users/robertwaggott/Code/distribyou/src/campaigns/confirm-modal.html","src/campaigns/campaigns.js","/Users/robertwaggott/Code/distribyou/src/campaigns/campaigns.html","src/campaigns/campaign.js","/Users/robertwaggott/Code/distribyou/src/campaigns/campaign.html","src/base-view-model.js","src/app.js","/Users/robertwaggott/Code/distribyou/src/app.html","src/account/subscriptions.js","/Users/robertwaggott/Code/distribyou/src/account/subscriptions.html"],"names":["configure","config","globalResources","nprogress","RouterProgressIndicator","EventAggregator","ea","attached","processingSubscriber","subscribe","start","completeSubscriber","done","detached","dispose","RequestIndicator","visible","Breadcrumbs","Router","eventAggregator","router","navigationSubscriber","loadInstructions","parentInstructions","getParentInstructions","currentInstruction","instructions","slice","length","concat","getAllInstructions","filter","instruction","includeInBreadcrumbs","title","navigateToRoute","name","params","arr","previousInstruction","routes","find","e","Campaign","activate","args","console","log","aurelia","use","standardConfiguration","plugin","PLATFORM","moduleName","useDefaults","settings","lock","centerHorizontalOnly","startingZIndex","keyboard","feature","environment","debug","developmentLogging","testing","then","setRoot","findACampaign","navigate","Header","showApiCallsButton","auth","goToMySubscriptions","Footer","CurrentState","email","address","ShareModal","DialogController","dialogController","campaign","shareOnTwitter","twitterWindow","window","open","url","focus","shareOnFacebook","facebookWindow","finish","ok","PledgeModal","paymentSchedule","switchPaymentSchedule","continue","Promise","client","HttpClient","get","id","JSON","parse","data","response","resolve","ConfirmModal","agreedToTermsAndConditions","state","setupStripeHandler","handler","StripeCheckout","key","image","locale","token","sendConfirmationEmail","addEventListener","close","confirm","description","amount","currency","billingAddress","allowRememberMe","panelLabel","post","Campaigns","campaigns","setDefaultLocalCampaigns","deactivate","handlePostcodeKeydown","code","searchByPostcode","postcode","localCampaigns","c","area","document","URL","DialogService","dialogService","location","mymap","L","map","setView","parseFloat","lat","lng","tileLayer","attribution","maxZoom","accessToken","addTo","marker","joinCampaign","opts","viewModel","model","whenClosed","wasCancelled","openConfirmModal","openShareModal","shareOnGoogle","googleWindow","BaseViewModel","setTitle","setParams","App","configureRouter","route","moduleId","addPipelineStep","AuthorizeStep","run","navigationInstruction","next","Subscriptions","x","subscribed"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export function configure(config) {\n    config.globalResources([\n    ]);\n}\n","import { inject, customElement } from \"aurelia-framework\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\nimport * as nprogress from \"nprogress\";\n\n@customElement(\"router-progress-indicator\")\n@inject(EventAggregator)\nexport class RouterProgressIndicator {\n    constructor(EventAggregator) {\n        this.ea = EventAggregator;\n    }\n        \n    attached() {\n        this.processingSubscriber = this.ea.subscribe(\"router:navigation:processing\", () => {\n            nprogress.start();\n        });\n\n        this.completeSubscriber = this.ea.subscribe(\"router:navigation:complete\", () => {\n            nprogress.done();\n        });        \n    }\n\n    detached() {\n        this.processingSubscriber.dispose();\n        this.completeSubscriber.dispose();\n    }\n}",null,"import { inject, customElement } from \"aurelia-framework\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\n\n@customElement(\"request-indicator\")\n@inject(EventAggregator)\nexport class RequestIndicator {\n    constructor(EventAggregator) {\n        this.ea = EventAggregator;\n        this.visible = false;\n    }\n        \n    attached() {\n        this.processingSubscriber = this.ea.subscribe(\"request:processing\", () => {\n            this.visible = true;\n        });\n\n        this.completeSubscriber = this.ea.subscribe(\"request:complete\", () => {\n            this.visible = false;\n        });\n    }\n\n    detached() {\n        this.processingSubscriber.dispose();\n        this.completeSubscriber.dispose();\n    }\n}",null,"import { inject, customElement } from \"aurelia-framework\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\nimport { Router } from \"aurelia-router\";\n\n@customElement(\"breadcrumbs\")\n@inject(EventAggregator, Router)\nexport class Breadcrumbs {\n    constructor(eventAggregator, router) {\n        this.ea = eventAggregator;\n        this.router = router;\n    }\n\n    attached() {\n        this.navigationSubscriber = this.ea.subscribe(\"router:navigation:success\", () => {\n            this.loadInstructions();\n        });\n\n        this.loadInstructions();\n    }\n\n    detached() {\n        if (this.navigationSubscriber) {\n            this.navigationSubscriber.dispose();\n        }\n    }\n\n    loadInstructions() {\n        let parentInstructions = this.getParentInstructions(this.router.currentInstruction);\n\n        this.instructions = parentInstructions\n            .slice(0, parentInstructions.length - 1)\n            .concat(this.router.currentInstruction.getAllInstructions())\n            .filter(instruction => instruction.config.includeInBreadcrumbs && instruction.config.title);\n    }\n\n    navigateToRoute(instruction) {\n        this.router.navigateToRoute(instruction.config.name, instruction.params);\n    }\n\n    getParentInstructions(instruction) {\n        let arr = [instruction];\n\n        if (!instruction.config.previousInstruction) {\n            return arr;\n        }\n\n        let routes = this.router.routes;\n        let previousInstruction = routes.find(e => e.name === instruction.config.previousInstruction);\n\n        if (!previousInstruction) {\n            return arr;\n        }\n\n        previousInstruction.config = previousInstruction;\n\n        return this.getParentInstructions(previousInstruction).concat(arr);\n    }\n}",null,"import { HttpClient } from \"aurelia-http-client\";\n\nexport class Campaign {\n    constructor() {\n    }\n\n    activate(args) {\n        console.log(args);\n    }\n}",null,"import { PLATFORM } from \"aurelia-pal\";\nimport environment from \"./environment\";\n\nexport function configure(aurelia) {\n    aurelia.use\n        .standardConfiguration()\n        .plugin(\"aurelia-validation\")\n        .plugin(PLATFORM.moduleName(\"aurelia-dialog\"), config => {\n            config.useDefaults();\n            config.settings.lock = false;\n            config.settings.centerHorizontalOnly = false;\n            config.settings.startingZIndex = 5;\n            config.settings.keyboard = true;    \n        })\n        .feature(\"resources\");\n\n    if (environment.debug) {\n        aurelia.use.developmentLogging();\n    }\n\n    if (environment.testing) {\n        aurelia.use.plugin(\"aurelia-testing\");\n    }\n\n    return aurelia.start().then(() => aurelia.setRoot());\n}\n","import { inject } from \"aurelia-framework\";\nimport { Router } from \"aurelia-router\";\n\n@inject(Router)\nexport class Campaign {\n    constructor(router) {\n        this.router = router;\n    }\n\n    activate(args) {\n\n    }\n\n    findACampaign() {\n        this.router.navigate(\"campaigns\");\n    }\n}",null,"import { inject } from \"aurelia-framework\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\nimport { Router } from \"aurelia-router\";\n\n@inject(EventAggregator, Router)\nexport class Header {\n    constructor(EventAggregator, router) {\n        this.ea = EventAggregator;\n        this.router = router;\n    }\n\n    attached() {\n        this.showApiCallsButton = this.router.currentInstruction.config.auth;\n    }\n\n    goToMySubscriptions() {\n        this.router.navigate(\"my-subscriptions\");\n    }\n}",null,"import { inject } from \"aurelia-framework\";\nimport { HttpClient } from \"aurelia-http-client\";\nimport { Router } from \"aurelia-router\";\n\n@inject(Router)\nexport class Footer {\n    constructor(router) {\n        this.router = router;\n    }\n\n    attached() {\n        // this.showVersionInfo = this.router.currentInstruction.config.auth;\n\n        // GitHubButtons.render();\n\n        // return new Promise(resolve => {\n        //     let client = new HttpClient();\n\n        //     client.get(\"/api/version\").then(data => {\n        //         this.state = JSON.parse(data.response);\n\n        //         resolve();\n        //     });\n        // });\n    }\n}",null,"export default {\n  debug: true,\n  testing: true\n};\n","export class CurrentState {\n    static get state() {\n        return {\n            name: \"Rob Giffin\",\n            email: \"rob.giffin@earthware.co.uk\",\n            address: \"The Governor, Knox Road, Norwich, Norfolk, NR1 4LU\"\n        };\n    }\n}","import { inject } from \"aurelia-framework\";\nimport { DialogController } from \"aurelia-dialog\";\n\n@inject(DialogController)\nexport class ShareModal {\n    constructor(dialogController) {\n        this.dialogController = dialogController;\n    }\n\n    activate(campaign) {\n        this.campaign = campaign;\n    }\n\n    shareOnTwitter() {\n        let twitterWindow = window.open('https://twitter.com/share?text=Check out the ' + this.campaign.name + ' campaign on Distribu&url=' + this.campaign.url, 'twitter-popup', 'height=350,width=600');\n        \n        if (twitterWindow.focus) { \n            twitterWindow.focus(); \n        }\n        \n        return false;\n    }\n\n    shareOnFacebook() {\n        let facebookWindow = window.open('https://www.facebook.com/sharer/sharer.php?quote=Check out the ' + this.campaign.name + ' campaign on Distribu&u=' + this.campaign.url, 'facebook-popup', 'height=350,width=600');\n        \n        if (facebookWindow.focus) { \n            facebookWindow.focus(); \n        }\n\n        return false;\n    }\n\n    finish() {\n        this.dialogController.ok();        \n    }\n}",null,"import { inject } from \"aurelia-framework\";\nimport { DialogController } from \"aurelia-dialog\";\n\n@inject(DialogController)\nexport class PledgeModal {\n    constructor(dialogController) {\n        this.dialogController = dialogController;\n        this.paymentSchedule = \"yearly\";\n    }\n\n    activate(campaign) {\n        this.campaign = campaign;\n    }\n\n    switchPaymentSchedule(paymentSchedule) {\n        this.paymentSchedule = paymentSchedule;\n    }\n\n    continue() {\n        this.dialogController.ok({\n            paymentSchedule: this.paymentSchedule\n        });\n    }\n}",null,"import { HttpClient } from \"aurelia-http-client\";\n\nexport class Campaign {\n    constructor() {\n    }\n\n    activate(args) {\n        console.log(args);\n\n        return new Promise(resolve => {\n            let client = new HttpClient();\n\n            client.get(`/api/campaign/${args.id}`).then(data => {\n                this.campaign = JSON.parse(data.response);\n\n                resolve();\n            });\n        });\n    }\n\n    attached() {\n    }\n}",null,"import { inject } from \"aurelia-framework\";\nimport { DialogController } from \"aurelia-dialog\";\nimport { CurrentState } from \"../current-state\";\nimport { HttpClient } from \"aurelia-http-client\";\n\n@inject(DialogController)\nexport class ConfirmModal {\n    constructor(dialogController) {\n        this.dialogController = dialogController;\n        this.agreedToTermsAndConditions = false;\n    }\n\n    activate(state) {\n        this.state = state;\n\n        this.setupStripeHandler();\n    }\n\n    setupStripeHandler() {\n        this.handler = StripeCheckout.configure({\n            key: 'pk_test_uP4xO5fMSTcUqez9MQ67b60X',\n            image: 'https://stripe.com/img/documentation/checkout/marketplace.png',\n            locale: 'auto',\n            token: (token) => {\n                this.sendConfirmationEmail();\n\n                this.dialogController.ok();\n            }\n        });\n\n        window.addEventListener('popstate', function() {\n            if (this.handler) {\n                this.handler.close();\n            }\n        });          \n    }\n\n    confirm() {\n        this.handler.open({\n            name: 'Distribu',\n            description: `Subscription to support the ${this.state.campaign.name} campaign`,\n            amount: 100,\n            email: CurrentState.state.email,\n            currency: \"gbp\",\n            billingAddress: false,\n            allowRememberMe: false,\n            panelLabel: \"Pay {{amount}} weekly\"\n        });      \n    }\n\n    sendConfirmationEmail() {\n        let client = new HttpClient();\n        let data = {\n            email: CurrentState.state.email,\n            campaign: this.state.campaign\n        };\n\n        client.post(\"/api/campaign/confirmation\", data);\n    }\n}",null,"import { HttpClient } from \"aurelia-http-client\";\n\nexport class Campaigns {\n    constructor() {\n    }\n\n    activate() {\n        return new Promise(resolve => {\n            let client = new HttpClient();\n\n            client.get(\"/api/campaigns\").then(data => {\n                this.campaigns = JSON.parse(data.response);\n\n                this.setDefaultLocalCampaigns();\n                resolve();\n            });\n        });\n    }\n\n    deactivate() {\n    }\n\n    handlePostcodeKeydown(e) {\n        if (e.code !== \"Enter\") {\n            return true;\n        }\n\n        this.searchByPostcode();\n        return true;\n    }\n\n    searchByPostcode() {\n        if (!this.postcode) {\n            this.setDefaultLocalCampaigns();\n            return;\n        }\n\n        let data = {\n            postcode: this.postcode\n        };\n\n        let client = new HttpClient();\n\n        client.post(\"/api/postcode/search\", data).then(data => {\n            this.localCampaigns = JSON.parse(data.response);\n        });        \n    }\n\n    setDefaultLocalCampaigns() {\n        this.localCampaigns = this.campaigns.filter(c => c.area === \"local\");\n    }\n\n    shareOnTwitter(campaign) {\n        var twitterWindow = window.open('https://twitter.com/share?url=' + document.URL, 'twitter-popup', 'height=350,width=600');\n        \n        if (twitterWindow.focus) { \n            twitterWindow.focus(); \n        }\n\n        return false;\n    }\n\n    shareOnFacebook(campaign) {\n        let facebookWindow = window.open('https://www.facebook.com/sharer/sharer.php?u=' + document.URL, 'facebook-popup', 'height=350,width=600');\n        \n        if (facebookWindow.focus) { \n            facebookWindow.focus(); \n        }\n\n        return false;\n    }\n}",null,"import { inject } from \"aurelia-framework\";\nimport { HttpClient } from \"aurelia-http-client\";\nimport { Router } from \"aurelia-router\";\nimport { DialogService } from \"aurelia-dialog\";\nimport { PledgeModal } from \"./pledge-modal\";\nimport { ConfirmModal } from \"./confirm-modal\";\nimport { ShareModal } from \"./share-modal\";\n\n@inject(DialogService, Router)\nexport class Campaign {\n    constructor(dialogService, router) {\n        this.dialogService = dialogService;\n        this.router = router;\n    }\n\n    activate(args) {\n        console.log(args);\n\n        return new Promise(resolve => {\n            let client = new HttpClient();\n\n            client.get(`/api/campaign/${args.id}`).then(data => {\n                this.campaign = JSON.parse(data.response);\n\n                console.log(this.campaign);\n\n                resolve();\n            });\n        });\n    }\n\n    attached() {\n        if (this.campaign.location) {\n            var mymap = L.map('mapid').setView([\n                parseFloat(this.campaign.location.lat), \n                parseFloat(this.campaign.location.lng)\n            ], 13);\n\n            L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoicm9iZXJ0LXdhZ2dvdHQiLCJhIjoiMmRlMmI0MTIzYjJkYWU4YTQ5MzRhOTFkMWNhZWY1ZWEifQ.5uVZ6P4XGNC4gnmbNS5OLQ', {\n                attribution: 'Map data &copy; <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a> contributors, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery Â© <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n                maxZoom: 18,\n                id: 'mapbox.streets',\n                accessToken: 'your.mapbox.access.token'\n            }).addTo(mymap);\n            \n            L.marker([\n                parseFloat(this.campaign.location.lat), \n                parseFloat(this.campaign.location.lng)                \n            ]).addTo(mymap);            \n        }\n    }\n\n    deactivate() {\n    }\n\n    joinCampaign(campaign) {\n        let opts = {\n            viewModel: PledgeModal,\n            model: campaign\n        };\n\n        this.dialogService.open(opts).whenClosed(response => {\n            if (response.wasCancelled) {\n                return;\n            }\n                \n            this.openConfirmModal(campaign, response.paymentSchedule);\n        });\n    }\n\n    openConfirmModal(campaign, paymentSchedule) {\n        let opts = {\n            viewModel: ConfirmModal,\n            model: {\n                campaign: campaign,\n                paymentSchedule: paymentSchedule\n            }\n        };\n\n        this.dialogService.open(opts).whenClosed(response => {\n            if (response.wasCancelled) {\n                return;\n            }\n             \n            this.openShareModal(campaign);\n        });        \n    }\n\n    openShareModal(campaign) {\n        let opts = {\n            viewModel: ShareModal,\n            model: campaign\n        };\n\n        this.dialogService.open(opts);\n    }\n\n    shareOnTwitter(campaign) {\n        var twitterWindow = window.open('https://twitter.com/share?text=Check out the ' + campaign.name + ' campaign on Distribu&url=' + document.URL, 'twitter-popup', 'height=350,width=600');\n        \n        if (twitterWindow.focus) { \n            twitterWindow.focus(); \n        }\n        \n        return false;\n    }\n\n    shareOnFacebook(campaign) {\n        let facebookWindow = window.open('https://www.facebook.com/sharer/sharer.php?quote=Check out the ' + campaign.name + ' campaign on Distribu&u=' + document.URL, 'facebook-popup', 'height=350,width=600');\n        \n        if (facebookWindow.focus) { \n            facebookWindow.focus(); \n        }\n\n        return false;\n    }\n\n    shareOnGoogle(campaign) {\n        let googleWindow = window.open('https://plus.google.com/share?text=Check out the ' + campaign.name + ' campaign on Distribu&url=' + document.URL, 'google-popup', 'height=350,width=600');\n        \n        if (googleWindow.focus) { \n            googleWindow.focus(); \n        }\n\n        return false;\n    }\n}",null,"export class BaseViewModel {\n    constructor(router) {\n        this.router = router;\n    }\n\n    setTitle(title) {\n        this.router.currentInstruction.config.title = title;\n    }\n\n    setParams(params) {\n        this.router.currentInstruction.config.params = params;\n    }\n}","import { inject } from \"aurelia-framework\";\nimport { EventAggregator } from \"aurelia-event-aggregator\";\nimport { DialogService } from \"aurelia-dialog\";\nimport { PLATFORM } from \"aurelia-pal\";\nimport { HttpClient } from \"aurelia-http-client\";\nimport { Redirect } from \"aurelia-router\";\n\n@inject(EventAggregator, DialogService)\nexport class App {\n    constructor(eventAggregator, dialogService) {\n        this.ea = eventAggregator;\n        this.dialogService = dialogService;\n    }\n\n    activate() {\n        this.ea.subscribe(\"app:view-job\", job => {\n        });\n    }\n\n    configureRouter(config, router) {\n        config.title = \"Distribu\";\n\n        config.map([\n            { \n                name: \"home\",\n                route: [\"\",\"home\",\"home-how-it-works\"],\n                moduleId: PLATFORM.moduleName(\"home/home\"),\n                title: \"Home\",\n                auth: false,\n                includeInBreadcrumbs: true\n            },\n            { \n                name: \"campaigns\",\n                route: \"campaigns\",\n                moduleId: PLATFORM.moduleName(\"campaigns/campaigns\"),\n                title: \"Campaigns\",\n                auth: false,\n                includeInBreadcrumbs: true\n            },\n            { \n                name: \"campaigns\",\n                route: \"campaign/:id\",\n                moduleId: PLATFORM.moduleName(\"campaigns/campaign\"),\n                title: \"Campaign\",\n                auth: false,\n                includeInBreadcrumbs: true\n            },\n            { \n                name: \"reports\",\n                route: \"reports\",\n                moduleId: PLATFORM.moduleName(\"reports/reports\"),\n                title: \"Reports\",\n                auth: false,\n                includeInBreadcrumbs: true\n            },\n            { \n                name: \"my-subscriptions\",\n                route: \"my-subscriptions\",\n                moduleId: PLATFORM.moduleName(\"account/subscriptions\"),\n                title: \"Subscriptions\",\n                auth: false,\n                includeInBreadcrumbs: true\n            }\n        ]);\n\n        config.addPipelineStep(\"authorize\", AuthorizeStep);\n\n        this.router = router;\n    }\n}\n\nclass AuthorizeStep {\n    run(navigationInstruction, next) {\n        return new Promise(resolve => {\n            let client = new HttpClient();\n\n            return resolve(next());\n\n            // client.get(\"/api/has-been-setup\").then(res => {\n            //     let parsedResponse = JSON.parse(res.response);\n            //     let currentRoute = navigationInstruction.config;\n            //     let loginRequired = currentRoute.auth && currentRoute.auth === true;\n\n            //     if (!parsedResponse.hasBeenSetup && loginRequired) {\n            //         return resolve(next.cancel(new Redirect(\"setup\")));\n            //     }\n\n            //     return resolve(next());\n            // });\n        });\n    }\n}\n",null,"import { HttpClient } from \"aurelia-http-client\";\n\nexport class Subscriptions {\n    activate() {\n        return new Promise(resolve => {\n            let client = new HttpClient();\n\n            client.get(\"/api/campaigns\").then(data => {\n                this.campaigns = JSON.parse(data.response).filter(x => x.subscribed);\n\n                resolve();\n            });\n        });\n    }\n}",null],"sourceRoot":"../.."}